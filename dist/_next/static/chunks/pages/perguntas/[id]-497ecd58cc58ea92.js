(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[192],{3199:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/perguntas/[id]",function(){return n(9233)}])},6673:function(e,t,n){"use strict";var r=n(5893);n(7294);t.Z=function(){return(0,r.jsx)("div",{className:"text-center bg-teal-500 p-5",children:(0,r.jsx)("p",{className:"font-semibold text-white",children:"2022"})})}},4272:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},I:function(){return s}});var r=n(5893),a=(n(7294),function(e){var t=e.id,n=e.name,a=e.value,s=e.setValue;return(0,r.jsxs)("label",{htmlFor:t,className:"flex items-center cursor-pointer",children:[(0,r.jsx)("div",{className:"ml-3 text-teal-500 font-semibold mr-2",children:n}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"checkbox",id:t,className:"sr-only",checked:a,onChange:function(){return s(!a)}}),(0,r.jsx)("div",{className:"block ".concat(a?"bg-teal-500":"bg-gray-500"," w-14 h-8 rounded-full")}),(0,r.jsx)("div",{className:"dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition"})]})]})}),s=function(e){var t=e.name,n=e.type,a=void 0===n?"text":n,s=e.placeholder,o=e.value,c=e.error,l=e.setValue;return(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-bold mb-2 text-teal-500",htmlFor:"email",children:t}),"textarea"===a?(0,r.jsx)("textarea",{rows:3,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline resize-none ".concat(c&&"border-red-500"),placeholder:s,value:o,onChange:function(e){return l(e.target.value)}}):(0,r.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline ".concat(c&&"border-red-500"),id:s,type:a,placeholder:s,value:o,onChange:function(e){return l(e.target.value)}}),c&&(0,r.jsx)("p",{className:"text-red-500 text-xs italic",children:c})]})}},7056:function(e,t,n){"use strict";var r=n(5893);n(7294);t.Z=function(e){var t=e.pageNum,n=e.setPage,a=e.disable;return(0,r.jsxs)("div",{className:"flex justify-center",children:[(0,r.jsx)("button",{className:"text-md font-semibold my-3 mx-2 py-2 px-5 border rounded bg-teal-500 text-white hover:cursor-pointer",disabled:t-1===0,onClick:function(){return n(t-1)},children:"Anterior"}),(0,r.jsx)("div",{className:"text-md font-semibold my-3 mx-2 py-2 px-5 border-2 rounded border-teal-500 bg-transparent text-teal-500 hover:cursor-pointer",children:t}),(0,r.jsx)("button",{className:"text-md font-semibold my-3 mx-2 py-2 px-5 border rounded bg-teal-500 text-white hover:cursor-pointer",disabled:a,onClick:function(){return n(t+1)},children:"Proximo"})]})}},1048:function(e,t,n){"use strict";n.d(t,{S:function(){return c},t:function(){return l}});var r,a=n(9669),s=n.n(a),o="http://45.79.253.74:3000";r=localStorage.getItem("accessToken");var c=s().create({baseURL:o,headers:{"Content-Type":"application/json"}}),l=s().create({baseURL:o,headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}})},9233:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(5666),a=n.n(r),s=n(5893),o=n(3153),c=n(9008),l=n(1664),i=n(1163),u=n(7294),d=n(1048);function x(e,t,n,r,a,s,o){try{var c=e[s](o),l=c.value}catch(i){return void n(i)}c.done?t(l):Promise.resolve(l).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function o(e){x(s,r,a,o,c,"next",e)}function c(e){x(s,r,a,o,c,"throw",e)}o(void 0)}))}}var p=function(e){var t=e.id,n=e.title,r=e.description,c=e.date,l=e.rate,i=void 0===l?0:l,x=e.expert,p=e.reload,h=e.setReload,m=(0,u.useState)(0),v=m[0],b=m[1],j=f(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(v>0)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,d.t.patch("/answer/like/".concat(t));case 5:e.sent.data&&(h(!p),b(1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),w=f(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(v<0)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,d.t.patch("/answer/dislike/".concat(t));case 5:e.sent.data&&(h(!p),b(-1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return(0,s.jsxs)("div",{className:"shadow border rounded p-2 flex my-5 text-teal-500 ".concat(x&&"border-l-8 border-l-teal-500"),children:[(0,s.jsxs)("div",{className:"text-center p-3",children:[(0,s.jsx)(o.Z7j,{className:"w-10\n          ".concat(v<=0?"text-teal-500":"text-gray-500","\n           hover:cursor-pointer"),onClick:function(){return j(t)}}),(0,s.jsx)("p",{className:"my-2",children:i}),(0,s.jsx)(o.C_W,{className:"w-10\n          ".concat(v>=0?"text-rose-500":"text-gray-500","\n          hover:cursor-pointer"),onClick:function(){return w(t)}})]}),(0,s.jsxs)("div",{className:"pl-5 flex flex-col grow",children:[(0,s.jsxs)("div",{className:"grow",children:[(0,s.jsx)("h2",{className:"text-2xl text-teal-800",children:n}),(0,s.jsx)("p",{children:r})]}),(0,s.jsx)("p",{className:"text-teal-800 text-right p-3",children:new Date(c).toLocaleDateString("pt-br")})]})]})},h=n(6673),m=n(4272),v=n(1952),b=n(7056),j=n(2917);function w(e,t,n,r,a,s,o){try{var c=e[s](o),l=c.value}catch(i){return void n(i)}c.done?t(l):Promise.resolve(l).then(r,a)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function o(e){w(s,r,a,o,c,"next",e)}function c(e){w(s,r,a,o,c,"throw",e)}o(void 0)}))}}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,s=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){a=!0,s=l}finally{try{r||null==c.return||c.return()}finally{if(a)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var k=function(){var e,t,n,r,x,f=(0,i.useRouter)().query.id,w=u.useContext(j.S).accessToken,k=N(u.useState(!1),2),C=k[0],S=k[1],_=N(u.useState(!1),2),A=_[0],E=_[1],P=N(u.useState({}),2),R=P[0],T=P[1],Z=N(u.useState([]),2),q=Z[0],F=Z[1],I=N(u.useState(""),2),z=I[0],D=I[1],L=N(u.useState(!1),2),O=L[0],V=L[1],G=N(u.useState(5),1)[0],U=N(u.useState(1),2),W=U[0],X=U[1],B=g(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S(!0),!(z.length<2||""===z)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,d.t.post("/answer/".concat(f),{content:z});case 6:e.sent.data,D(""),E(!A),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:return e.prev=14,S(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])}))),M=g(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.t.patch("/question/close/".concat(f));case 3:e.sent.data&&(E(!A),V(!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),H=g(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.t.patch("/question/like/".concat(f));case 3:e.sent.data&&E(!A),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),J=g(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.t.patch("/question/dislike/".concat(f));case 3:e.sent.data&&E(!A),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return u.useEffect((function(){var e;if(null===(e=R.answers)||void 0===e?void 0:e.length){var t=y(R.answers);F(t.slice((W-1)*G,W*G))}}),[R,W]),u.useEffect((function(){f&&g(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.t.get("/question/".concat(f));case 3:t=e.sent.data,T(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[f,A]),(0,s.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,s.jsx)(c.default,{children:(0,s.jsx)("title",{children:"Pergunta"})}),(0,s.jsx)(v.Z,{}),O?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none m-3",children:(0,s.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:(0,s.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[(0,s.jsx)("div",{className:"flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t",children:(0,s.jsx)("h3",{className:"text-2xl text-teal-800 font-semibold",children:"Confirmar"})}),(0,s.jsx)("div",{className:"relative px-5 py-2 flex-auto",children:(0,s.jsx)("p",{className:"my-2 text-teal-700 text-lg leading-relaxed",children:"Voc\xea est\xe1 prestes a fechar esta pergunta, uma a\xe7\xe3o que n\xe3o pode ser desfeita, ao fechar novas respostas nao poderao ser enviadas, deseja continuar?"})}),(0,s.jsxs)("div",{className:"flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b",children:[(0,s.jsx)("button",{className:"text-rose-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:function(){return V(!1)},children:"N\xe3o"}),(0,s.jsx)("button",{className:"bg-teal-500 text-white active:bg-teal-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",onClick:function(){return M()},children:"Sim"})]})]})})}),(0,s.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null,(0,s.jsx)("main",{className:"container m-auto grow",children:(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl mb-5 text-teal-900",children:R.title}),(0,s.jsx)("div",{className:"pr-4",children:R.closed?(0,s.jsx)(o.khe,{className:"w-10 text-teal-800"}):(0,s.jsx)(o.GlA,{className:"w-10 hover:cursor-pointer text-teal-800",onClick:function(){R.producer._id===(0,v.a)(w).id&&V(!0)}})})]}),(0,s.jsxs)("div",{className:"flex mb-5",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(o.Z7j,{className:"w-10 text-teal-500 hover:cursor-pointer",onClick:function(){return H()}}),(0,s.jsx)("p",{className:"my-2 text-teal-500",children:String(R.likes-R.dislike)}),(0,s.jsx)(o.C_W,{className:"w-10 text-rose-500 hover:cursor-pointer",onClick:function(){return J()}})]}),(0,s.jsxs)("div",{className:"grow",children:[(0,s.jsxs)("div",{className:"flex md:flex-row flex-col-reverse",children:[(0,s.jsx)("p",{className:"pl-5 text-teal-500 text-justify flex-1",children:R.content}),(0,s.jsxs)("div",{className:"flex-1 px-5 pb-2 flex flex-row-reverse justify-between md:flex-col md:justify-start text-right font-semibold text-teal-700",children:[(0,s.jsx)("p",{children:new Date(R.createdAt).toLocaleDateString("pt-br")}),(0,s.jsx)("p",{children:null===(e=R.producer)||void 0===e?void 0:e.name})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap",children:null===(t=R.images)||void 0===t?void 0:t.map((function(e,t){return(0,s.jsx)(u.Fragment,{children:(0,s.jsx)(l.default,{href:e,children:(0,s.jsx)("a",{target:"_blank",className:"w-2/4 md:w-1/4 p-5",children:(0,s.jsx)("img",{src:e,className:"shadow border rounded "})})},t)},t)}))}),(0,s.jsx)("div",{className:"ml-5",children:null===(n=R.tags)||void 0===n?void 0:n.map((function(e,t){return(0,s.jsx)("span",{className:"bg-teal-900 text-white rounded mb-1 mr-1 p-1 text-xs",children:e},e+t)}))})]})]}),!!(null===(r=R.answers)||void 0===r?void 0:r.length)&&(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsxs)("h2",{className:"text-2xl text-teal-700 border-b-2 border-teal-700 pb-2 mb-5",children:[R.answers.length," Resposta",!!R.answers.length&&"s"]}),null===q||void 0===q?void 0:q.map((function(e){var t=e._id,n=e.content,r=e.owner,a=e.createdAt,o=e.likes,c=e.dislike;return(0,s.jsx)(p,{id:t,title:r.name,description:n,date:a,rate:o-c,expert:r.hasExpert&&(null===R||void 0===R?void 0:R.tags.includes(r.type)),reload:A,setReload:E},t)})),(0,s.jsx)(b.Z,{disable:W>=Math.ceil((null===(x=R.answers)||void 0===x?void 0:x.length)/G),pageNum:W,setPage:X})]}),!R.closed&&!!w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.I,{name:"Sua resposta",placeholder:"Resposta",type:"textarea",value:z,setValue:D}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("button",{className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button",disabled:C,onClick:function(){B()},children:"Responder"})})]})]})}),(0,s.jsx)(h.Z,{})]})}},1163:function(e,t,n){e.exports=n(387)}},function(e){e.O(0,[647,774,888,179],(function(){return t=3199,e(e.s=t);var t}));var t=e.O();_N_E=t}]);